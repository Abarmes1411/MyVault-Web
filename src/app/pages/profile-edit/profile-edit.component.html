<div class="container mt-4 friendlist-container" *ngIf="userVault">
  <h2 class="mb-4 section-title text-center">Editar Perfil</h2>

  <form (ngSubmit)="guardarCambios()" #editForm="ngForm">
    <div class="form-group mb-3">
      <label for="name">Nombre:</label>
      <input type="text" id="name" [(ngModel)]="userVault.name" name="name" class="form-control" required>
    </div>

    <div class="form-group mb-3">
      <label for="surname">Apellidos:</label>
      <input type="text" id="surname" [(ngModel)]="userVault.surname" name="surname" class="form-control" required>
    </div>

    <div class="form-group mb-3">
      <label for="username">Nombre de usuario:</label>
      <input type="text" id="username" [(ngModel)]="userVault.username" name="username" class="form-control" required>
    </div>

    <div class="form-group mb-3">
      <label for="email">Email:</label>
      <input type="email" id="email" [ngModel]="userVault.email" name="email" class="form-control" disabled>
    </div>

    <div class="form-group mb-3">
      <label>Foto de perfil:</label><br>
      <img *ngIf="userVault?.profilePic"
           [src]="'assets/profile-pics/' + userVault.profilePic"
           alt="Perfil actual"
           width="200"
           height="200" class="rounded-circle mb-2 border border-secondary">
      <br>
      <button type="button" class="btn btn-outline-primary" (click)="mostrarSelector = !mostrarSelector">
        Seleccionar imagen
      </button>
    </div>

    <!-- Selector de imÃ¡genes -->
    <div *ngIf="mostrarSelector" class="mb-3">
      <div class="d-flex gap-3 flex-wrap">
        <img *ngFor="let img of profileOptions"
             [src]="'assets/profile-pics/' + img"
             [alt]="img"
             width="200"
             height="200"
             class="img-thumbnail cursor-pointer"
             (click)="seleccionarFoto(img)">
      </div>
    </div>

    <button class="btn btn-success" type="submit" [disabled]="!editForm.form.valid">
      <i class="fa fa-save"></i> Guardar Cambios
    </button>
    <a routerLink="/profile" class="btn btn-secondary ms-2">Cancelar</a>
  </form>
  <div *ngIf="successMessage" class="alert alert-success" role="alert">
    {{ successMessage }}
  </div>
</div>

